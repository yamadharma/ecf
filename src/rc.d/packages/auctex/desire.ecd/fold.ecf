;;;  -*- mode: emacs-lisp; lexical-binding: t; coding: utf-8-unix; -*-
;;; TeX-fold-mode
;; https://www.gnu.org/software/auctex/manual/auctex/Folding.html

;;;
;; https://www.flannaghan.com/2013/01/11/tex-fold-mode
(add-hook 'LaTeX-mode-hook 
	  (lambda () 
            (TeX-fold-mode 1)
            (add-hook 'find-file-hook 'TeX-fold-buffer t t)
	    ;;; automatically call `TeX-fold-paragraph` when either $ or } are entered
	    ;;; shortcut for `TeX-fold-paragraph` is C-c C-o C-p
            (add-hook 'after-change-functions 
		      (lambda (start end oldlen) 
			(when (= (- end start) 1)
			  (let ((char-point 
                                 (buffer-substring-no-properties 
                                  start end)))
			    (when (or (string= char-point "}")
				      (string= char-point "$"))
			      (TeX-fold-paragraph)))))
		      t t)))

;;;
